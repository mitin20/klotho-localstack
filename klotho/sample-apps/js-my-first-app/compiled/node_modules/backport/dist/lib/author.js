"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCommitAuthor = exports.getGitConfigAuthor = void 0;
const git_1 = require("./git");
async function getGitConfigAuthor(options) {
    const localRepoPath = await (0, git_1.getLocalSourceRepoPath)(options);
    if (!localRepoPath) {
        return;
    }
    return {
        name: await (0, git_1.getGitConfig)({ dir: localRepoPath, key: 'user.name' }),
        email: await (0, git_1.getGitConfig)({ dir: localRepoPath, key: 'user.email' }),
    };
}
exports.getGitConfigAuthor = getGitConfigAuthor;
function getCommitAuthor({ options, commit, gitConfigAuthor, }) {
    if (options.resetAuthor) {
        return {
            name: options.authenticatedUsername,
            email: `<${options.authenticatedUsername}@users.noreply.github.com>`,
        };
    }
    return {
        name: options.gitAuthorName ?? gitConfigAuthor?.name ?? commit.author.name,
        email: options.gitAuthorEmail ?? gitConfigAuthor?.email ?? commit.author.email,
    };
}
exports.getCommitAuthor = getCommitAuthor;

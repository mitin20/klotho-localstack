"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ApiObjectMetadataDefinition = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
const _resolve_1 = require("./_resolve");
const _util_1 = require("./_util");
/**
 * Object metadata.
 */
class ApiObjectMetadataDefinition {
    constructor(options = {}) {
        this.name = options.name;
        this.labels = { ...options.labels } ?? {};
        this.annotations = { ...options.annotations } ?? {};
        this.namespace = options.namespace;
        this.finalizers = options.finalizers ? [...options.finalizers] : [];
        this.ownerReferences = options.ownerReferences ? [...options.ownerReferences] : [];
        this._additionalAttributes = options ?? {};
    }
    /**
     * Add a label.
     *
     * @param key - The key.
     * @param value - The value.
     */
    addLabel(key, value) {
        this.labels[key] = value;
    }
    /**
     * @returns a value of a label or undefined
     * @param key the label
     */
    getLabel(key) {
        return this.labels[key];
    }
    /**
     * Add an annotation.
     *
     * @param key - The key.
     * @param value - The value.
     */
    addAnnotation(key, value) {
        this.annotations[key] = value;
    }
    /**
     * Add one or more finalizers.
     *
     * @param finalizers the finalizers
     */
    addFinalizers(...finalizers) {
        this.finalizers.push(...finalizers);
    }
    /**
     * Add an owner.
     *
     * @param owner the owner
     */
    addOwnerReference(owner) {
        this.ownerReferences.push(owner);
    }
    /**
     * Adds an arbitrary key/value to the object metadata.
     * @param key Metadata key
     * @param value Metadata value
     */
    add(key, value) {
        this._additionalAttributes[key] = value;
    }
    /**
     * Synthesizes a k8s ObjectMeta for this metadata set.
     */
    toJson() {
        const sanitize = (x) => _util_1.sanitizeValue(x, { filterEmptyArrays: true, filterEmptyObjects: true });
        return sanitize(_resolve_1.resolve({
            ...this._additionalAttributes,
            name: this.name,
            namespace: this.namespace,
            annotations: this.annotations,
            finalizers: this.finalizers,
            ownerReferences: this.ownerReferences,
            labels: this.labels,
        }));
    }
}
exports.ApiObjectMetadataDefinition = ApiObjectMetadataDefinition;
_a = JSII_RTTI_SYMBOL_1;
ApiObjectMetadataDefinition[_a] = { fqn: "cdk8s.ApiObjectMetadataDefinition", version: "2.7.77" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YWRhdGEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbWV0YWRhdGEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx5Q0FBcUM7QUFDckMsbUNBQXdDO0FBcUd4Qzs7R0FFRztBQUNILE1BQWEsMkJBQTJCO0lBeUN0QyxZQUFZLFVBQTZCLEVBQUc7UUFDMUMsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFHLENBQUM7UUFDM0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLEdBQUcsT0FBTyxDQUFDLFdBQVcsRUFBRSxJQUFJLEVBQUcsQ0FBQztRQUNyRCxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDbkMsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDcEUsSUFBSSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDbkYsSUFBSSxDQUFDLHFCQUFxQixHQUFHLE9BQU8sSUFBSSxFQUFHLENBQUM7SUFDOUMsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksUUFBUSxDQUFDLEdBQVcsRUFBRSxLQUFhO1FBQ3hDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQzNCLENBQUM7SUFFRDs7O09BR0c7SUFDSSxRQUFRLENBQUMsR0FBVztRQUN6QixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksYUFBYSxDQUFDLEdBQVcsRUFBRSxLQUFhO1FBQzdDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksYUFBYSxDQUFDLEdBQUcsVUFBb0I7UUFDMUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLGlCQUFpQixDQUFDLEtBQXFCO1FBQzVDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ksR0FBRyxDQUFDLEdBQVcsRUFBRSxLQUFVO1FBQ2hDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDMUMsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTTtRQUNYLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBTSxFQUFFLEVBQUUsQ0FBQyxxQkFBYSxDQUFDLENBQUMsRUFBRSxFQUFFLGlCQUFpQixFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3JHLE9BQU8sUUFBUSxDQUFDLGtCQUFPLENBQUM7WUFDdEIsR0FBRyxJQUFJLENBQUMscUJBQXFCO1lBQzdCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtZQUNmLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztZQUN6QixXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVc7WUFDN0IsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO1lBQzNCLGVBQWUsRUFBRSxJQUFJLENBQUMsZUFBZTtZQUNyQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07U0FDcEIsQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDOztBQXhISCxrRUF5SEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAnLi9fcmVzb2x2ZSc7XG5pbXBvcnQgeyBzYW5pdGl6ZVZhbHVlIH0gZnJvbSAnLi9fdXRpbCc7XG5cbi8qKlxuICogTWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb2JqZWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFwaU9iamVjdE1ldGFkYXRhIHtcbiAgLyoqXG4gICAqIFRoZSB1bmlxdWUsIG5hbWVzcGFjZS1nbG9iYWwsIG5hbWUgb2YgdGhpcyBvYmplY3QgaW5zaWRlIHRoZSBLdWJlcm5ldGVzXG4gICAqIGNsdXN0ZXIuXG4gICAqXG4gICAqIE5vcm1hbGx5LCB5b3Ugc2hvdWxkbid0IHNwZWNpZnkgbmFtZXMgZm9yIG9iamVjdHMgYW5kIGxldCB0aGUgQ0RLIGdlbmVyYXRlXG4gICAqIGEgbmFtZSBmb3IgeW91IHRoYXQgaXMgYXBwbGljYXRpb24tdW5pcXVlLiBUaGUgbmFtZXMgQ0RLIGdlbmVyYXRlcyBhcmVcbiAgICogY29tcG9zZWQgZnJvbSB0aGUgY29uc3RydWN0IHBhdGggY29tcG9uZW50cywgc2VwYXJhdGVkIGJ5IGRvdHMgYW5kIGEgc3VmZml4XG4gICAqIHRoYXQgaXMgYmFzZWQgb24gYSBoYXNoIG9mIHRoZSBlbnRpcmUgcGF0aCwgdG8gZW5zdXJlIHVuaXF1ZW5lc3MuXG4gICAqXG4gICAqIFlvdSBjYW4gc3VwcGx5IGN1c3RvbSBuYW1lIGFsbG9jYXRpb24gbG9naWMgYnkgb3ZlcnJpZGluZyB0aGVcbiAgICogYGNoYXJ0LmdlbmVyYXRlT2JqZWN0TmFtZWAgbWV0aG9kLlxuICAgKlxuICAgKiBJZiB5b3UgdXNlIGFuIGV4cGxpY2l0IG5hbWUgaGVyZSwgYmVhciBpbiBtaW5kIHRoYXQgdGhpcyByZWR1Y2VzIHRoZVxuICAgKiBjb21wb3NhYmlsaXR5IG9mIHlvdXIgY29uc3RydWN0IGJlY2F1c2UgaXQgd29uJ3QgYmUgcG9zc2libGUgdG8gaW5jbHVkZVxuICAgKiBtb3JlIHRoYW4gb25lIGluc3RhbmNlIGluIGFueSBhcHAuIFRoZXJlZm9yZSBpdCBpcyBoaWdobHkgcmVjb21tZW5kZWQgdG9cbiAgICogbGVhdmUgdGhpcyB1bnNwZWNpZmllZC5cbiAgICpcbiAgICogQGRlZmF1bHQgLSBhbiBhcHAtdW5pcXVlIG5hbWUgZ2VuZXJhdGVkIGJ5IHRoZSBjaGFydFxuICAgKi9cbiAgcmVhZG9ubHkgbmFtZT86IHN0cmluZztcblxuICAvKipcbiAgICogQW5ub3RhdGlvbnMgaXMgYW4gdW5zdHJ1Y3R1cmVkIGtleSB2YWx1ZSBtYXAgc3RvcmVkIHdpdGggYSByZXNvdXJjZSB0aGF0IG1heSBiZSBzZXQgYnkgZXh0ZXJuYWwgdG9vbHMgdG8gc3RvcmUgYW5kIHJldHJpZXZlIGFyYml0cmFyeSBtZXRhZGF0YS4gVGhleSBhcmUgbm90IHF1ZXJ5YWJsZSBhbmQgc2hvdWxkIGJlXG4gICAqIHByZXNlcnZlZCB3aGVuIG1vZGlmeWluZyBvYmplY3RzLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvdXNlci1ndWlkZS9hbm5vdGF0aW9uc1xuICAgKiBAZGVmYXVsdCAtIE5vIGFubm90YXRpb25zLlxuICAgKi9cbiAgcmVhZG9ubHkgYW5ub3RhdGlvbnM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuXG4gIC8qKlxuICAgKiBNYXAgb2Ygc3RyaW5nIGtleXMgYW5kIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIHRvIG9yZ2FuaXplIGFuZCBjYXRlZ29yaXplIChzY29wZSBhbmQgc2VsZWN0KSBvYmplY3RzLlxuICAgKiBNYXkgbWF0Y2ggc2VsZWN0b3JzIG9mIHJlcGxpY2F0aW9uIGNvbnRyb2xsZXJzIGFuZCBzZXJ2aWNlcy5cbiAgICpcbiAgICogQHNlZSBodHRwOi8va3ViZXJuZXRlcy5pby9kb2NzL3VzZXItZ3VpZGUvbGFiZWxzXG4gICAqIEBkZWZhdWx0IC0gTm8gbGFiZWxzLlxuICAgKi9cbiAgcmVhZG9ubHkgbGFiZWxzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcblxuICAvKipcbiAgICogTmFtZXNwYWNlIGRlZmluZXMgdGhlIHNwYWNlIHdpdGhpbiBlYWNoIG5hbWUgbXVzdCBiZSB1bmlxdWUuIEFuIGVtcHR5IG5hbWVzcGFjZSBpcyBlcXVpdmFsZW50IHRvIHRoZSBcImRlZmF1bHRcIiBuYW1lc3BhY2UsIGJ1dCBcImRlZmF1bHRcIiBpcyB0aGUgY2Fub25pY2FsIHJlcHJlc2VudGF0aW9uLlxuICAgKiBOb3QgYWxsIG9iamVjdHMgYXJlIHJlcXVpcmVkIHRvIGJlIHNjb3BlZCB0byBhIG5hbWVzcGFjZSAtIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGZvciB0aG9zZSBvYmplY3RzIHdpbGwgYmUgZW1wdHkuIE11c3QgYmUgYSBETlNfTEFCRUwuIENhbm5vdCBiZSB1cGRhdGVkLiBNb3JlIGluZm86IGh0dHA6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvdXNlci1ndWlkZS9uYW1lc3BhY2VzXG4gICAqXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZCAod2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgJ2RlZmF1bHQnIG5hbWVzcGFjZSlcbiAgICovXG4gIHJlYWRvbmx5IG5hbWVzcGFjZT86IHN0cmluZztcblxuICAvKipcbiAgICogTmFtZXNwYWNlZCBrZXlzIHRoYXQgdGVsbCBLdWJlcm5ldGVzIHRvIHdhaXQgdW50aWwgc3BlY2lmaWMgY29uZGl0aW9ucyBhcmVcbiAgICogbWV0IGJlZm9yZSBpdCBmdWxseSBkZWxldGVzIHJlc291cmNlcyBtYXJrZWQgZm9yIGRlbGV0aW9uLlxuICAgKlxuICAgKiBNdXN0IGJlIGVtcHR5IGJlZm9yZSB0aGUgb2JqZWN0IGlzIGRlbGV0ZWQgZnJvbSB0aGUgcmVnaXN0cnkuIEVhY2ggZW50cnkgaXNcbiAgICogYW4gaWRlbnRpZmllciBmb3IgdGhlIHJlc3BvbnNpYmxlIGNvbXBvbmVudCB0aGF0IHdpbGwgcmVtb3ZlIHRoZSBlbnRyeSBmcm9tXG4gICAqIHRoZSBsaXN0LiBJZiB0aGUgZGVsZXRpb25UaW1lc3RhbXAgb2YgdGhlIG9iamVjdCBpcyBub24tbmlsLCBlbnRyaWVzIGluXG4gICAqIHRoaXMgbGlzdCBjYW4gb25seSBiZSByZW1vdmVkLiBGaW5hbGl6ZXJzIG1heSBiZSBwcm9jZXNzZWQgYW5kIHJlbW92ZWQgaW5cbiAgICogYW55IG9yZGVyLiAgT3JkZXIgaXMgTk9UIGVuZm9yY2VkIGJlY2F1c2UgaXQgaW50cm9kdWNlcyBzaWduaWZpY2FudCByaXNrIG9mXG4gICAqIHN0dWNrIGZpbmFsaXplcnMuIGZpbmFsaXplcnMgaXMgYSBzaGFyZWQgZmllbGQsIGFueSBhY3RvciB3aXRoIHBlcm1pc3Npb25cbiAgICogY2FuIHJlb3JkZXIgaXQuIElmIHRoZSBmaW5hbGl6ZXIgbGlzdCBpcyBwcm9jZXNzZWQgaW4gb3JkZXIsIHRoZW4gdGhpcyBjYW5cbiAgICogbGVhZCB0byBhIHNpdHVhdGlvbiBpbiB3aGljaCB0aGUgY29tcG9uZW50IHJlc3BvbnNpYmxlIGZvciB0aGUgZmlyc3RcbiAgICogZmluYWxpemVyIGluIHRoZSBsaXN0IGlzIHdhaXRpbmcgZm9yIGEgc2lnbmFsIChmaWVsZCB2YWx1ZSwgZXh0ZXJuYWxcbiAgICogc3lzdGVtLCBvciBvdGhlcikgcHJvZHVjZWQgYnkgYSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGEgZmluYWxpemVyIGxhdGVyXG4gICAqIGluIHRoZSBsaXN0LCByZXN1bHRpbmcgaW4gYSBkZWFkbG9jay4gV2l0aG91dCBlbmZvcmNlZCBvcmRlcmluZyBmaW5hbGl6ZXJzXG4gICAqIGFyZSBmcmVlIHRvIG9yZGVyIGFtb25nc3QgdGhlbXNlbHZlcyBhbmQgYXJlIG5vdCB2dWxuZXJhYmxlIHRvIG9yZGVyaW5nXG4gICAqIGNoYW5nZXMgaW4gdGhlIGxpc3QuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvd29ya2luZy13aXRoLW9iamVjdHMvZmluYWxpemVycy9cbiAgICogQGRlZmF1bHQgLSBObyBmaW5hbGl6ZXJzLlxuICAgKi9cbiAgcmVhZG9ubHkgZmluYWxpemVycz86IHN0cmluZ1tdO1xuXG4gIC8qKlxuICAgKiBMaXN0IG9mIG9iamVjdHMgZGVwZW5kZWQgYnkgdGhpcyBvYmplY3QuIElmIEFMTCBvYmplY3RzIGluIHRoZSBsaXN0IGhhdmVcbiAgICogYmVlbiBkZWxldGVkLCB0aGlzIG9iamVjdCB3aWxsIGJlIGdhcmJhZ2UgY29sbGVjdGVkLiBJZiB0aGlzIG9iamVjdCBpc1xuICAgKiBtYW5hZ2VkIGJ5IGEgY29udHJvbGxlciwgdGhlbiBhbiBlbnRyeSBpbiB0aGlzIGxpc3Qgd2lsbCBwb2ludCB0byB0aGlzXG4gICAqIGNvbnRyb2xsZXIsIHdpdGggdGhlIGNvbnRyb2xsZXIgZmllbGQgc2V0IHRvIHRydWUuIFRoZXJlIGNhbm5vdCBiZSBtb3JlXG4gICAqIHRoYW4gb25lIG1hbmFnaW5nIGNvbnRyb2xsZXIuXG4gICAqXG4gICAqIEt1YmVybmV0ZXMgc2V0cyB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBhdXRvbWF0aWNhbGx5IGZvciBvYmplY3RzIHRoYXQgYXJlXG4gICAqIGRlcGVuZGVudHMgb2Ygb3RoZXIgb2JqZWN0cyBsaWtlIFJlcGxpY2FTZXRzLCBEYWVtb25TZXRzLCBEZXBsb3ltZW50cywgSm9ic1xuICAgKiBhbmQgQ3JvbkpvYnMsIGFuZCBSZXBsaWNhdGlvbkNvbnRyb2xsZXJzLiBZb3UgY2FuIGFsc28gY29uZmlndXJlIHRoZXNlXG4gICAqIHJlbGF0aW9uc2hpcHMgbWFudWFsbHkgYnkgY2hhbmdpbmcgdGhlIHZhbHVlIG9mIHRoaXMgZmllbGQuIEhvd2V2ZXIsIHlvdVxuICAgKiB1c3VhbGx5IGRvbid0IG5lZWQgdG8gYW5kIGNhbiBhbGxvdyBLdWJlcm5ldGVzIHRvIGF1dG9tYXRpY2FsbHkgbWFuYWdlIHRoZVxuICAgKiByZWxhdGlvbnNoaXBzLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8va3ViZXJuZXRlcy5pby9kb2NzL2NvbmNlcHRzL292ZXJ2aWV3L3dvcmtpbmctd2l0aC1vYmplY3RzL293bmVycy1kZXBlbmRlbnRzL1xuICAgKiBAZGVmYXVsdCAtIGF1dG9tYXRpY2FsbHkgc2V0IGJ5IEt1YmVybmV0ZXNcbiAgICovXG4gIHJlYWRvbmx5IG93bmVyUmVmZXJlbmNlcz86IE93bmVyUmVmZXJlbmNlW107XG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgbWV0YWRhdGEgYXR0cmlidXRlcy5cbiAgICovXG4gIHJlYWRvbmx5IFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuLyoqXG4gKiBPYmplY3QgbWV0YWRhdGEuXG4gKi9cbmV4cG9ydCBjbGFzcyBBcGlPYmplY3RNZXRhZGF0YURlZmluaXRpb24ge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIEFQSSBvYmplY3QuXG4gICAqXG4gICAqIElmIGEgbmFtZSBpcyBzcGVjaWZpZWQgaW4gYG1ldGFkYXRhLm5hbWVgIHRoaXMgd2lsbCBiZSB0aGUgbmFtZSByZXR1cm5lZC5cbiAgICogT3RoZXJ3aXNlLCBhIG5hbWUgd2lsbCBiZSBnZW5lcmF0ZWQgYnkgY2FsbGluZ1xuICAgKiBgQ2hhcnQub2YodGhpcykuZ2VuZXJhdGVkT2JqZWN0TmFtZSh0aGlzKWAsIHdoaWNoIGJ5IGRlZmF1bHQgdXNlcyB0aGVcbiAgICogY29uc3RydWN0IHBhdGggdG8gZ2VuZXJhdGUgYSBETlMtY29tcGF0aWJsZSBuYW1lIGZvciB0aGUgcmVzb3VyY2UuXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgbmFtZT86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCdzIG5hbWVzcGFjZS5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBuYW1lc3BhY2U/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIExhYmVscyBhc3NvY2lhdGVkIHdpdGggdGhpcyBvYmplY3QuXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGxhYmVsczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcblxuICAvKipcbiAgICogQW5ub3RhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBhbm5vdGF0aW9uczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcblxuICAvKipcbiAgICogRmluYWxpemVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBvYmplY3QuXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGZpbmFsaXplcnM6IHN0cmluZ1tdO1xuXG4gIC8qKlxuICAgKiBPd25lciByZWZlcmVuY2VzIHNldCBmb3IgdGhpcyBvYmplY3QuXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IG93bmVyUmVmZXJlbmNlczogT3duZXJSZWZlcmVuY2VbXTtcblxuICAvKipcbiAgICogQWRkaXRpb25hbCBtZXRhZGF0YSBhdHRyaWJ1dGVzIHBhc3NlZCB0aHJvdWdoIGBvcHRpb25zYC5cbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgX2FkZGl0aW9uYWxBdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEFwaU9iamVjdE1ldGFkYXRhID0geyB9KSB7XG4gICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgIHRoaXMubGFiZWxzID0geyAuLi5vcHRpb25zLmxhYmVscyB9ID8/IHsgfTtcbiAgICB0aGlzLmFubm90YXRpb25zID0geyAuLi5vcHRpb25zLmFubm90YXRpb25zIH0gPz8geyB9O1xuICAgIHRoaXMubmFtZXNwYWNlID0gb3B0aW9ucy5uYW1lc3BhY2U7XG4gICAgdGhpcy5maW5hbGl6ZXJzID0gb3B0aW9ucy5maW5hbGl6ZXJzID8gWy4uLm9wdGlvbnMuZmluYWxpemVyc10gOiBbXTtcbiAgICB0aGlzLm93bmVyUmVmZXJlbmNlcyA9IG9wdGlvbnMub3duZXJSZWZlcmVuY2VzID8gWy4uLm9wdGlvbnMub3duZXJSZWZlcmVuY2VzXSA6IFtdO1xuICAgIHRoaXMuX2FkZGl0aW9uYWxBdHRyaWJ1dGVzID0gb3B0aW9ucyA/PyB7IH07XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbGFiZWwuXG4gICAqXG4gICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5LlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgYWRkTGFiZWwoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxhYmVsc1trZXldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSB2YWx1ZSBvZiBhIGxhYmVsIG9yIHVuZGVmaW5lZFxuICAgKiBAcGFyYW0ga2V5IHRoZSBsYWJlbFxuICAgKi9cbiAgcHVibGljIGdldExhYmVsKGtleTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5sYWJlbHNba2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gYW5ub3RhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGtleSAtIFRoZSBrZXkuXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZS5cbiAgICovXG4gIHB1YmxpYyBhZGRBbm5vdGF0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5hbm5vdGF0aW9uc1trZXldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQWRkIG9uZSBvciBtb3JlIGZpbmFsaXplcnMuXG4gICAqXG4gICAqIEBwYXJhbSBmaW5hbGl6ZXJzIHRoZSBmaW5hbGl6ZXJzXG4gICAqL1xuICBwdWJsaWMgYWRkRmluYWxpemVycyguLi5maW5hbGl6ZXJzOiBzdHJpbmdbXSkge1xuICAgIHRoaXMuZmluYWxpemVycy5wdXNoKC4uLmZpbmFsaXplcnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBvd25lci5cbiAgICpcbiAgICogQHBhcmFtIG93bmVyIHRoZSBvd25lclxuICAgKi9cbiAgcHVibGljIGFkZE93bmVyUmVmZXJlbmNlKG93bmVyOiBPd25lclJlZmVyZW5jZSkge1xuICAgIHRoaXMub3duZXJSZWZlcmVuY2VzLnB1c2gob3duZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gYXJiaXRyYXJ5IGtleS92YWx1ZSB0byB0aGUgb2JqZWN0IG1ldGFkYXRhLlxuICAgKiBAcGFyYW0ga2V5IE1ldGFkYXRhIGtleVxuICAgKiBAcGFyYW0gdmFsdWUgTWV0YWRhdGEgdmFsdWVcbiAgICovXG4gIHB1YmxpYyBhZGQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICB0aGlzLl9hZGRpdGlvbmFsQXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogU3ludGhlc2l6ZXMgYSBrOHMgT2JqZWN0TWV0YSBmb3IgdGhpcyBtZXRhZGF0YSBzZXQuXG4gICAqL1xuICBwdWJsaWMgdG9Kc29uKCkge1xuICAgIGNvbnN0IHNhbml0aXplID0gKHg6IGFueSkgPT4gc2FuaXRpemVWYWx1ZSh4LCB7IGZpbHRlckVtcHR5QXJyYXlzOiB0cnVlLCBmaWx0ZXJFbXB0eU9iamVjdHM6IHRydWUgfSk7XG4gICAgcmV0dXJuIHNhbml0aXplKHJlc29sdmUoe1xuICAgICAgLi4udGhpcy5fYWRkaXRpb25hbEF0dHJpYnV0ZXMsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICBuYW1lc3BhY2U6IHRoaXMubmFtZXNwYWNlLFxuICAgICAgYW5ub3RhdGlvbnM6IHRoaXMuYW5ub3RhdGlvbnMsXG4gICAgICBmaW5hbGl6ZXJzOiB0aGlzLmZpbmFsaXplcnMsXG4gICAgICBvd25lclJlZmVyZW5jZXM6IHRoaXMub3duZXJSZWZlcmVuY2VzLFxuICAgICAgbGFiZWxzOiB0aGlzLmxhYmVscyxcbiAgICB9KSk7XG4gIH1cbn1cblxuLyoqXG4gKiBPd25lclJlZmVyZW5jZSBjb250YWlucyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gbGV0IHlvdSBpZGVudGlmeSBhbiBvd25pbmdcbiAqIG9iamVjdC4gQW4gb3duaW5nIG9iamVjdCBtdXN0IGJlIGluIHRoZSBzYW1lIG5hbWVzcGFjZSBhcyB0aGUgZGVwZW5kZW50LCBvclxuICogYmUgY2x1c3Rlci1zY29wZWQsIHNvIHRoZXJlIGlzIG5vIG5hbWVzcGFjZSBmaWVsZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBPd25lclJlZmVyZW5jZSB7XG4gIC8qKlxuICAgKiBBUEkgdmVyc2lvbiBvZiB0aGUgcmVmZXJlbnQuXG4gICAqL1xuICByZWFkb25seSBhcGlWZXJzaW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIEFORCBpZiB0aGUgb3duZXIgaGFzIHRoZSBcImZvcmVncm91bmREZWxldGlvblwiIGZpbmFsaXplciwgdGhlbiB0aGVcbiAgICogb3duZXIgY2Fubm90IGJlIGRlbGV0ZWQgZnJvbSB0aGUga2V5LXZhbHVlIHN0b3JlIHVudGlsIHRoaXMgcmVmZXJlbmNlIGlzXG4gICAqIHJlbW92ZWQuIERlZmF1bHRzIHRvIGZhbHNlLiBUbyBzZXQgdGhpcyBmaWVsZCwgYSB1c2VyIG5lZWRzIFwiZGVsZXRlXCJcbiAgICogcGVybWlzc2lvbiBvZiB0aGUgb3duZXIsIG90aGVyd2lzZSA0MjIgKFVucHJvY2Vzc2FibGUgRW50aXR5KSB3aWxsIGJlXG4gICAqIHJldHVybmVkLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZS4gVG8gc2V0IHRoaXMgZmllbGQsIGEgdXNlciBuZWVkcyBcImRlbGV0ZVwiIHBlcm1pc3Npb24gb2YgdGhlXG4gICAqIG93bmVyLCBvdGhlcndpc2UgNDIyIChVbnByb2Nlc3NhYmxlIEVudGl0eSkgd2lsbCBiZSByZXR1cm5lZC5cbiAgICovXG4gIHJlYWRvbmx5IGJsb2NrT3duZXJEZWxldGlvbj86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHRoaXMgcmVmZXJlbmNlIHBvaW50cyB0byB0aGUgbWFuYWdpbmcgY29udHJvbGxlci5cbiAgICovXG4gIHJlYWRvbmx5IGNvbnRyb2xsZXI/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBLaW5kIG9mIHRoZSByZWZlcmVudC5cbiAgICpcbiAgICogQHNlZSBodHRwczovL2dpdC5rOHMuaW8vY29tbXVuaXR5L2NvbnRyaWJ1dG9ycy9kZXZlbC9zaWctYXJjaGl0ZWN0dXJlL2FwaS1jb252ZW50aW9ucy5tZCN0eXBlcy1raW5kc1xuICAgKi9cbiAgcmVhZG9ubHkga2luZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSByZWZlcmVudC5cbiAgICpcbiAgICogQHNlZSBodHRwOi8va3ViZXJuZXRlcy5pby9kb2NzL3VzZXItZ3VpZGUvaWRlbnRpZmllcnMjbmFtZXNcbiAgICovXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVUlEIG9mIHRoZSByZWZlcmVudC5cbiAgICpcbiAgICogQHNlZSBodHRwOi8va3ViZXJuZXRlcy5pby9kb2NzL3VzZXItZ3VpZGUvaWRlbnRpZmllcnMjdWlkc1xuICAgKi9cbiAgcmVhZG9ubHkgdWlkOiBzdHJpbmc7XG5cbn1cbiJdfQ==